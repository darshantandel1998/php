{% extends "base.html.twig" %}

{% block title %}Admin | CMS Pages{% endblock %}

{% block content %}
<div class="mx-5 m-3">
    <div class="d-flex justify-content-between mx-5 mb-2">
        <h1>CMS Pages</h1>
        <a class="btn btn-primary h-100 my-auto" href={{ url('admin/categories/add') }}>Add Pages</a>
    </div>
    <div class="{{ SESSION.error.class }}" role="alert">{{ SESSION.error.msg }}</div>
    {% if categories %}
    <div class="d-flex justify-content-center">
        <table class="table table-bordered">
            <thead>
                <tr>
                    <th>Pages Name</th>
                    <th>Url Key</th>
                    <th>Image</th>
                    <th>Status</th>
                    <th>Description</th>
                    <th>Parent Pages</th>
                    <th>Created At</th>
                    <th>Updated At</th>
                    <th colspan="2">Action</th>
                </tr>
            </thead>
            <tbody>
                {% for page in categories %}
                <tr>
                    <td>{{ page.Pages_Name }}</td>
                    <td>{{ page.Url_Key }}</td>
                    <td class="text-center"><img class="img-thumbnail" src={{ url("images/page/" ~ page.Image) }}></td>
                    <td>{{ page.Status }}</td>
                    <td>{{ page.Description }}</td>
                    <td>{{ page.Parent_Pages_ID }}</td>
                    <td>{{ page.Created_At }}</td>
                    <td>{{ page.Updated_At }}</td>
                    <td>
                        <a class="btn btn-primary" href={{ url('admin/categories/edit/') ~ categories.Id }}>Update</a>
                        <form class="d-inline" action={{ url('admin/categories/delete') }} method="POST">
                            <input type="hidden" name="delete" value={{ page.Id }}>
                            <button class="btn btn-danger" type="submit">Delete</button>
                        </form>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% else %}
    <h5 class="alert alert-danger text-center mt-5">Pages not found</h5>
    {% endif %}
</div>
{% endblock %}